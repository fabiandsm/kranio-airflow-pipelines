groups:
- name: pipeline_alerts
  rules:

  - alert: PipelineHighDagFailureRate
    expr: rate(pipeline_pipeline_dag_failure[5m]) / (rate(pipeline_pipeline_dag_success[5m]) + rate(pipeline_pipeline_dag_failure[5m])) > 0.1
    for: 5m
    labels:
      severity: warning
    annotations:
      summary: "High DAG failure rate"
      description: "DAG failure rate > 10% for 5 minutes"

  - alert: PipelineSLAViolation
    expr: increase(pipeline_pipeline_sla_violations[1h]) > 0
    labels:
      severity: critical
    annotations:
      summary: "SLA violation detected"
      description: "Pipeline missed SLA in the last hour"
